<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bizwink.persistence.OrganizationMapper">
    <resultMap id="BaseResultMap" type="com.bizwink.po.Organization">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="ID" jdbcType="DECIMAL" property="ID" />
        <result column="PARENT" jdbcType="DECIMAL" property="PARENT" />
        <result column="COTYPE" jdbcType="DECIMAL" property="COTYPE" />
        <result column="NODEID" jdbcType="DECIMAL" property="NODEID" />
        <result column="STATUS" jdbcType="DECIMAL" property="STATUS" />
        <result column="NAME" jdbcType="VARCHAR" property="NAME" />
        <result column="ENAME" jdbcType="VARCHAR" property="ENAME" />
        <result column="ORDERID" jdbcType="DECIMAL" property="ORDERID" />
        <result column="CUSTOMERID" jdbcType="DECIMAL" property="STATUS" />
        <result column="LLEVEL" jdbcType="DECIMAL" property="LLEVEL" />
        <result column="ORGCODE" jdbcType="VARCHAR" property="ORGCODE" />
        <result column="ISLEAF" jdbcType="DECIMAL" property="ISLEAF" />
        <result column="LASTUPDATE" jdbcType="TIMESTAMP" property="LASTUPDATE" />
        <result column="CREATEDATE" jdbcType="TIMESTAMP" property="CREATEDATE" />
        <result column="CREATEUSER" jdbcType="VARCHAR" property="CREATEUSER" />
        <result column="UPDATEUSER" jdbcType="VARCHAR" property="CREATEUSER" />
    </resultMap>

    <resultMap id="ParentMap" type="com.bizwink.po.OrgPid">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="DECIMAL" property="id" />
        <result column="parent" jdbcType="DECIMAL" property="parentid" />
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        ID, PARENT, COTYPE, NODEID, STATUS, NAME, ENAME, ORDERID, CUSTOMERID, LLEVEL, ORGCODE, ISLEAF, LASTUPDATE, CREATEDATE,
        CREATEUSER, UPDATEUSER
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.math.BigDecimal" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List" />
        from TBL_ORGANIZATION
        where ID = #{ID,jdbcType=DECIMAL}
    </select>

    <select id="getAllOrgnizations" parameterType="java.math.BigDecimal" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List" />
        from TBL_ORGANIZATION
        where CUSTOMERID = #{CUSTOMERID,jdbcType=DECIMAL}  order by ID desc
    </select>

    <select id="getAllParentID" parameterType="java.math.BigDecimal" resultMap="ParentMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        SELECT DISTINCT PARENT,ID from TBL_ORGANIZATION where CUSTOMERID = #{CUSTOMERID,jdbcType=DECIMAL}
    </select>

    <delete id="deleteByPrimaryKey" parameterType="java.math.BigDecimal">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from TBL_ORGANIZATION
        where ID = #{ID,jdbcType=DECIMAL}
    </delete>

    <select id="getOrderNumByParentID" parameterType="java.util.Map" resultType="java.math.BigDecimal">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select max(orderid) from TBL_ORGANIZATION
        where CUSTOMERID = #{CUSTOMERID,jdbcType=DECIMAL} and  PARENT = #{PARENT,jdbcType=DECIMAL}
    </select>

    <select id="getFirstLevelOrgnizations" parameterType="java.math.BigDecimal" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List" />
        from TBL_ORGANIZATION
        where CUSTOMERID = #{CUSTOMERID,jdbcType=DECIMAL}
    </select>

    <select id="getOrgnizationByCode" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List" />
        from TBL_ORGANIZATION
        where ORGCODE = #{ORGCODE,jdbcType=VARCHAR}
    </select>

    <select id="getSubOrgtreeByParant" parameterType="java.util.Map" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List" />
        from TBL_ORGANIZATION
        where CUSTOMERID = #{CUSTOMERID,jdbcType=DECIMAL} and  ID >= #{ID,jdbcType=DECIMAL}
    </select>

    <select id="getOrgByParant" parameterType="java.util.Map" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List" />
        from TBL_ORGANIZATION
        where CUSTOMERID = #{CUSTOMERID,jdbcType=DECIMAL} and  PARENT = #{PARENT,jdbcType=DECIMAL}
    </select>

    <select id="getRootOrgnization" resultMap="BaseResultMap" parameterType="java.math.BigDecimal">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List" />
        from TBL_ORGANIZATION t1 where  t1.id=(select min(t2.id) FROM TBL_ORGANIZATION t2 where t2.CUSTOMERID= #{CUSTOMERID,jdbcType=DECIMAL} )
    </select>

    <insert id="insert" parameterType="com.bizwink.po.Organization" databaseId="oracle">
        <selectKey  keyProperty="ID" resultType="BigDecimal" order="BEFORE">
            select TBL_USERINFOS_ID.NEXTVAL from dual
        </selectKey>

        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into TBL_ORGANIZATION (ID, PARENT, COTYPE,
        NODEID, STATUS, NAME, ENAME, ORDERID,CUSTOMERID,
        LLEVEL, ORGCODE, ISLEAF,
        LASTUPDATE, CREATEDATE, CREATEUSER, UPDATEUSER
        )
        values (#{ID,jdbcType=DECIMAL}, #{PARENT,jdbcType=DECIMAL}, #{COTYPE,jdbcType=DECIMAL},
        #{NODEID,jdbcType=DECIMAL}, #{STATUS,jdbcType=DECIMAL}, #{NAME,jdbcType=VARCHAR},
        #{ENAME,jdbcType=VARCHAR},#{ORDERID,jdbcType=DECIMAL},#{CUSTOMERID,jdbcType=DECIMAL}, #{LLEVEL,jdbcType=DECIMAL},
        #{ORGCODE,jdbcType=VARCHAR}, #{ISLEAF,jdbcType=DECIMAL}, #{LASTUPDATE,jdbcType=TIMESTAMP},
        #{CREATEDATE,jdbcType=TIMESTAMP}, #{CREATEUSER,jdbcType=VARCHAR}, #{UPDATEUSER,jdbcType=VARCHAR}
        )
    </insert>

    <insert id="insert" useGeneratedKeys="true" keyProperty="ID" parameterType="com.bizwink.po.Organization" databaseId="mysql">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.

        <selectKey keyProperty="id" order="AFTER" resultType="int">
            select  last_insert_id()
        </selectKey>
         -->

        insert into TBL_ORGANIZATION (PARENT, COTYPE,
        NODEID, STATUS, NAME, ENAME, ORDERID,CUSTOMERID,
        LLEVEL, ORGCODE, ISLEAF,
        LASTUPDATE, CREATEDATE, CREATEUSER, UPDATEUSER
        )
        values (#{PARENT,jdbcType=DECIMAL}, #{COTYPE,jdbcType=DECIMAL},
        #{NODEID,jdbcType=DECIMAL}, #{STATUS,jdbcType=DECIMAL}, #{NAME,jdbcType=VARCHAR},
        #{ENAME,jdbcType=VARCHAR},#{ORDERID,jdbcType=DECIMAL},#{CUSTOMERID,jdbcType=DECIMAL}, #{LLEVEL,jdbcType=DECIMAL},
        #{ORGCODE,jdbcType=VARCHAR}, #{ISLEAF,jdbcType=DECIMAL}, #{LASTUPDATE,jdbcType=TIMESTAMP},
        #{CREATEDATE,jdbcType=TIMESTAMP}, #{CREATEUSER,jdbcType=VARCHAR}, #{UPDATEUSER,jdbcType=VARCHAR}
        )
    </insert>

    <insert id="insertSelective" parameterType="com.bizwink.po.Organization">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into TBL_ORGANIZATION
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="ID != null">
                ID,
            </if>
            <if test="PARENT != null">
                PARENT,
            </if>
            <if test="COTYPE != null">
                COTYPE,
            </if>
            <if test="NODEID != null">
                NODEID,
            </if>
            <if test="STATUS != null">
                STATUS,
            </if>
            <if test="NAME != null">
                NAME,
            </if>
            <if test="ENAME != null">
                ENAME,
            </if>
            <if test="ORDERID != null">
                ORDERID,
            </if>
            <if test="CUSTOMERID != null">
                CUSTOMERID,
            </if>
            <if test="LLEVEL != null">
                LLEVEL,
            </if>
            <if test="ORGCODE != null">
                ORGCODE,
            </if>
            <if test="ISLEAF != null">
                ISLEAF,
            </if>
            <if test="LASTUPDATE != null">
                LASTUPDATE,
            </if>
            <if test="CREATEDATE != null">
                CREATEDATE,
            </if>
            <if test="CREATEUSER != null">
                CREATEUSER,
            </if>
            <if test="UPDATEUSER != null">
                UPDATEUSER,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="ID != null">
                #{ID,jdbcType=DECIMAL},
            </if>
            <if test="PARENT != null">
                #{PARENT,jdbcType=DECIMAL},
            </if>
            <if test="COTYPE != null">
                #{COTYPE,jdbcType=DECIMAL},
            </if>
            <if test="NODEID != null">
                #{NODEID,jdbcType=DECIMAL},
            </if>
            <if test="STATUS != null">
                #{STATUS,jdbcType=DECIMAL},
            </if>
            <if test="NAME != null">
                #{NAME,jdbcType=VARCHAR},
            </if>
            <if test="ENAME != null">
                #{ENAME,jdbcType=VARCHAR},
            </if>
            <if test="ORDERID != null">
                #{ORDERID,jdbcType=DECIMAL},
            </if>
            <if test="CUSTOMERID != null">
                #{CUSTOMERID,jdbcType=DECIMAL},
            </if>
            <if test="LLEVEL != null">
                #{LLEVEL,jdbcType=DECIMAL},
            </if>
            <if test="ORGCODE != null">
                #{ORGCODE,jdbcType=VARCHAR},
            </if>
            <if test="ISLEAF != null">
                #{ISLEAF,jdbcType=DECIMAL},
            </if>
            <if test="LASTUPDATE != null">
                #{LASTUPDATE,jdbcType=TIMESTAMP},
            </if>
            <if test="CREATEDATE != null">
                #{CREATEDATE,jdbcType=TIMESTAMP},
            </if>
            <if test="CREATEUSER != null">
                #{CREATEUSER,jdbcType=VARCHAR},
            </if>
            <if test="UPDATEUSER != null">
                #{UPDATEUSER,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.bizwink.po.Organization">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update TBL_ORGANIZATION
        <set>
            <if test="PARENT != null">
                PARENT = #{PARENT,jdbcType=DECIMAL},
            </if>
            <if test="COTYPE != null">
                COTYPE = #{COTYPE,jdbcType=DECIMAL},
            </if>
            <if test="NODEID != null">
                NODEID = #{NODEID,jdbcType=DECIMAL},
            </if>
            <if test="STATUS != null">
                STATUS = #{STATUS,jdbcType=DECIMAL},
            </if>
            <if test="NAME != null">
                NAME = #{NAME,jdbcType=VARCHAR},
            </if>
            <if test="ENAME != null">
                ENAME = #{ENAME,jdbcType=VARCHAR},
            </if>
            <if test="ORDERID != null">
                ORDERID = #{ORDERID,jdbcType=VARCHAR},
            </if>
            <if test="CUSTOMERID != null">
                CUSTOMERID = #{CUSTOMERID,jdbcType=VARCHAR},
            </if>
            <if test="LLEVEL != null">
                LLEVEL = #{LLEVEL,jdbcType=DECIMAL},
            </if>
            <if test="ORGCODE != null">
                ORGCODE = #{ORGCODE,jdbcType=VARCHAR},
            </if>
            <if test="ISLEAF != null">
                ISLEAF = #{ISLEAF,jdbcType=DECIMAL},
            </if>
            <if test="LASTUPDATE != null">
                LASTUPDATE = #{LASTUPDATE,jdbcType=TIMESTAMP},
            </if>
            <if test="CREATEDATE != null">
                CREATEDATE = #{CREATEDATE,jdbcType=TIMESTAMP},
            </if>
            <if test="CREATEUSER != null">
                CREATEUSER = #{CREATEUSER,jdbcType=VARCHAR},
            </if>
            <if test="UPDATEUSER != null">
                UPDATEUSER = #{UPDATEUSER,jdbcType=VARCHAR},
            </if>
        </set>
        where ID = #{ID,jdbcType=DECIMAL}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.bizwink.po.Organization">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update TBL_ORGANIZATION
        set PARENT = #{PARENT,jdbcType=DECIMAL},
        COTYPE = #{COTYPE,jdbcType=DECIMAL},
        NODEID = #{NODEID,jdbcType=DECIMAL},
        STATUS = #{STATUS,jdbcType=DECIMAL},
        NAME = #{NAME,jdbcType=VARCHAR},
        ENAME = #{ENAME,jdbcType=VARCHAR},
        ORDERID = #{ORDERID,jdbcType=VARCHAR},
        CUSTOMERID = #{CUSTOMERID,jdbcType=VARCHAR},
        LLEVEL = #{LLEVEL,jdbcType=DECIMAL},
        ORGCODE = #{ORGCODE,jdbcType=VARCHAR},
        ISLEAF = #{ISLEAF,jdbcType=DECIMAL},
        LASTUPDATE = #{LASTUPDATE,jdbcType=TIMESTAMP},
        CREATEDATE = #{CREATEDATE,jdbcType=TIMESTAMP},
        CREATEUSER = #{CREATEUSER,jdbcType=VARCHAR}
        UPDATEUSER = #{UPDATEUSER,jdbcType=VARCHAR}
        where ID = #{ID,jdbcType=DECIMAL}
    </update>

    <update id="updateIsleafByID" parameterType="java.util.Map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update TBL_ORGANIZATION set  ISLEAF = #{ISLEAF,jdbcType=DECIMAL} where ID = #{ID,jdbcType=DECIMAL}
    </update>
</mapper>